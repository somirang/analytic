{"ast":null,"code":"import _regeneratorRuntime from\"/Users/haesol/Desktop/mediround-user-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/haesol/Desktop/mediround-user-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/haesol/Desktop/mediround-user-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{FormattedMessage}from\"react-intl\";import{useDispatch}from\"react-redux\";import{Route,Switch,withRouter}from\"react-router\";import{getHospital}from\"../../api/hospital\";import{setHospital}from\"../../store/reducers/hospital\";import Preview from\"./Containers/Preview\";import Request from\"./Containers/Request\";import Schedule from\"./Containers/Schedule\";import Sent from\"./Containers/Sent\";import\"./Main.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ThreeTabNavbar=function ThreeTabNavbar(props){return/*#__PURE__*/_jsx(\"div\",{className:\"main-page-main-navbar-container\",children:props.tabs&&props.tabs.map(function(tab,ind){return/*#__PURE__*/_jsx(\"div\",{className:\"main-page-main-navbar-item-wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"main-page-main-navbar-item \".concat(props.selectedTab===tab.value?\"selected\":\"\"),onClick:function onClick(){return props.setSelectedTab(tab.value);},children:tab.name},ind)},ind);})});};var Main=function Main(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),selectedTab=_useState2[0],setSelectedTab=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var dispatch=useDispatch();var tabs={my:[{name:\"Quote Requests\",value:\"request\"},{name:\"Sent Quotes\",value:\"sent\"},{name:\"Scheduled Consultations\",value:\"schedule\"}],profile:[{name:\"Account\",value:\"account\"},{name:\"Hospital Info.\",value:\"info\"},{name:\"People & Staffs\",value:\"people\"}]};useEffect(function(){var location=props.location.pathname.slice(1);location=location.charAt(location.length-1)===\"/\"?location.slice(0,-1):location;var splitted=location.split(\"/\");if(splitted.length>=3){setSelectedTab(splitted[2]);}else if(tabs[props.viewType]){setSelectedTab(tabs[props.viewType][0].value);}},[props.location]);useEffect(function(){setIsLoading(true);var initHospital=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var hospitalData,hospital;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getHospital({hid:\"h1\"});case 2:hospitalData=_context.sent;hospital=hospitalData.result;dispatch(setHospital(hospital));case 5:case\"end\":return _context.stop();}}},_callee);}));return function initHospital(){return _ref.apply(this,arguments);};}();initHospital().then(function(){setIsLoading(false);}).catch(function(e){console.error(\"Main\",e);setIsLoading(false);});},[]);var selectTabHandler=function selectTabHandler(tabVal){setSelectedTab(tabVal);props.history.push(\"/hospital/\".concat(props.viewType,\"/\").concat(tabVal));};return/*#__PURE__*/_jsxs(\"div\",{className:\"main-page-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"main-page-sidebar-container\",children:/*#__PURE__*/_jsx(FormattedMessage,{id:\"hello\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-page-main-container\",children:[tabs[props.viewType]&&/*#__PURE__*/_jsx(ThreeTabNavbar,{tabs:tabs[props.viewType],viewType:props.viewType,selectedTab:selectedTab,setSelectedTab:selectTabHandler}),/*#__PURE__*/_jsx(\"div\",{className:\"main-page-main-content-container\",children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/hospital\",component:Request}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/hospital/my\",component:Request}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/hospital/my/request\",component:Request}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/hospital/my/request/:quoteId\",component:Preview}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/hospital/my/sent\",component:Sent}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/hospital/my/schedule\",component:Schedule})]})})]})]});};export default withRouter(Main);","map":{"version":3,"sources":["/Users/haesol/Desktop/mediround-user-web/src/pages/Hospital/Main.tsx"],"names":["React","useEffect","useState","FormattedMessage","useDispatch","Route","Switch","withRouter","getHospital","setHospital","Preview","Request","Schedule","Sent","ThreeTabNavbar","props","tabs","map","tab","ind","selectedTab","value","setSelectedTab","name","Main","isLoading","setIsLoading","dispatch","my","profile","location","pathname","slice","charAt","length","splitted","split","viewType","initHospital","hid","hospitalData","hospital","result","then","catch","e","console","error","selectTabHandler","tabVal","history","push"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport { useDispatch } from \"react-redux\";\nimport { Route, RouteComponentProps, Switch, withRouter } from \"react-router\";\nimport { getHospital } from \"../../api/hospital\";\nimport { setHospital } from \"../../store/reducers/hospital\";\nimport Preview from \"./Containers/Preview\";\nimport Request from \"./Containers/Request\";\nimport Schedule from \"./Containers/Schedule\";\nimport Sent from \"./Containers/Sent\";\nimport \"./Main.scss\";\n\ninterface ThreeTabNavbarProps {\n  tabs: any[];\n  viewType: string;\n  selectedTab: string;\n  setSelectedTab: (tabVal: string) => void;\n}\n\nconst ThreeTabNavbar = (props: ThreeTabNavbarProps) => {\n  return (\n    <div className=\"main-page-main-navbar-container\">\n      {props.tabs &&\n        props.tabs.map((tab, ind) => (\n          <div className=\"main-page-main-navbar-item-wrapper\" key={ind}>\n            <div\n              className={`main-page-main-navbar-item ${\n                props.selectedTab === tab.value ? \"selected\" : \"\"\n              }`}\n              key={ind}\n              onClick={() => props.setSelectedTab(tab.value)}\n            >\n              {tab.name}\n            </div>\n          </div>\n        ))}\n    </div>\n  );\n};\n\ninterface MainProps extends RouteComponentProps {\n  viewType: string;\n}\n\nconst Main = (props: MainProps) => {\n  const [selectedTab, setSelectedTab] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(true);\n  const dispatch = useDispatch();\n\n  const tabs: { [key: string]: any[] } = {\n    my: [\n      { name: \"Quote Requests\", value: \"request\" },\n      { name: \"Sent Quotes\", value: \"sent\" },\n      { name: \"Scheduled Consultations\", value: \"schedule\" },\n    ],\n    profile: [\n      { name: \"Account\", value: \"account\" },\n      { name: \"Hospital Info.\", value: \"info\" },\n      { name: \"People & Staffs\", value: \"people\" },\n    ],\n  };\n\n  useEffect(() => {\n    let location = props.location.pathname.slice(1);\n    location =\n      location.charAt(location.length - 1) === \"/\"\n        ? location.slice(0, -1)\n        : location;\n    const splitted = location.split(\"/\");\n    if (splitted.length >= 3) {\n      setSelectedTab(splitted[2]);\n    } else if (tabs[props.viewType]) {\n      setSelectedTab(tabs[props.viewType][0].value);\n    }\n  }, [props.location]);\n\n  useEffect(() => {\n    setIsLoading(true);\n    const initHospital = async () => {\n      // TODO: get hospital ID\n      const hospitalData = await getHospital({ hid: \"h1\" });\n      const hospital = hospitalData.result;\n      dispatch(setHospital(hospital));\n    };\n    initHospital()\n      .then(() => {\n        setIsLoading(false);\n      })\n      .catch((e) => {\n        console.error(\"Main\", e);\n        setIsLoading(false);\n      });\n  }, []);\n\n  const selectTabHandler = (tabVal: string) => {\n    setSelectedTab(tabVal);\n    props.history.push(`/hospital/${props.viewType}/${tabVal}`);\n  };\n\n  return (\n    <div className=\"main-page-container\">\n      <div className=\"main-page-sidebar-container\">\n        <FormattedMessage id=\"hello\" />\n      </div>\n      <div className=\"main-page-main-container\">\n        {tabs[props.viewType] && (\n          <ThreeTabNavbar\n            tabs={tabs[props.viewType]}\n            viewType={props.viewType}\n            selectedTab={selectedTab}\n            setSelectedTab={selectTabHandler}\n          />\n        )}\n        <div className=\"main-page-main-content-container\">\n          <Switch>\n            <Route exact path=\"/hospital\" component={Request} />\n            <Route exact path=\"/hospital/my\" component={Request} />\n            <Route exact path=\"/hospital/my/request\" component={Request} />\n            <Route\n              exact\n              path=\"/hospital/my/request/:quoteId\"\n              component={Preview}\n            />\n            <Route exact path=\"/hospital/my/sent\" component={Sent} />\n            <Route exact path=\"/hospital/my/schedule\" component={Schedule} />\n          </Switch>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default withRouter(Main);\n"]},"metadata":{},"sourceType":"module"}