{"ast":null,"code":"var _jsxFileName = \"/Users/haesol/Desktop/mediround-user-web-master/src/pages/SignIn.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useHistory, useLocation } from \"react-router\";\nimport { useAuthContext } from \"../auth/auth\";\nimport Button from \"../components/Button/Button\";\nimport UnderlinedButton from \"../components/Button/UnderlinedButton\";\nimport InfoInput from \"../components/Input/InfoInput\";\nimport { parseQuery, phoneLocaleList } from \"../utils\";\nimport \"./SignIn.scss\";\nimport { FormattedMessage } from \"react-intl\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst SignIn = props => {\n  _s();\n\n  const auth = useAuthContext();\n  const location = useLocation();\n  const [phoneLocale, setPhoneLocale] = useState(phoneLocaleList[0].value);\n  const [phoneDigit, setPhoneDigit] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [signInLoading, setSignInLoading] = useState(false);\n  const user = useSelector(state => state.user.current);\n  const history = useHistory();\n  useEffect(() => {\n    const nextLoc = parseQuery(location.search)[\"next\"];\n\n    if (user !== {} && nextLoc) {\n      history.push(nextLoc);\n    }\n  }, []);\n  useEffect(() => {\n    // Determines phone number i.e. username\n    const fullPhone = phoneLocale + phoneDigit;\n    setPhone(fullPhone);\n  }, [phoneLocale, phoneDigit]);\n\n  const signInHandler = () => {\n    setSignInLoading(true);\n    auth === null || auth === void 0 ? void 0 : auth.authenticate(phone, password).then(() => {\n      const nextLoc = parseQuery(location.search)[\"next\"];\n\n      if (nextLoc) {\n        props.history.push(nextLoc);\n      } else {\n        props.history.push(\"/mypage\");\n      }\n    }).catch(err => {\n      setSignInLoading(false);\n      console.error(err);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"signin-page-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"signin-page-title\",\n      children: /*#__PURE__*/_jsxDEV(FormattedMessage, {\n        id: \"logIn.msg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(InfoInput, {\n      title: \"Phone number\",\n      titleId: \"logIn.phone\",\n      type: \"tel\",\n      value: phoneDigit,\n      onChange: e => setPhoneDigit(e.target.value),\n      optionVals: phoneLocaleList.map(obj => obj.value),\n      optionKeys: phoneLocaleList.map(obj => obj.icon + \" \" + obj.value),\n      onSelectChange: e => setPhoneLocale(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(InfoInput, {\n      title: \"Password\",\n      titleId: \"logIn.Password\",\n      type: \"password\",\n      value: password,\n      onChange: e => setPassword(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"signin-forgot-passwd-text\",\n      children: /*#__PURE__*/_jsxDEV(UnderlinedButton, {\n        text: \"Forgot password?\",\n        textId: \"logIn.forgotYourPassword\",\n        onClick: () => props.history.push(\"/forgotPasswd\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      text: \"Sign In\",\n      textId: \"button.signIn\",\n      theme: \"primary\",\n      shape: \"round\",\n      onClick: signInHandler,\n      isLoading: signInLoading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"signin-signup-text\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"signin-signup-desc\",\n        children: /*#__PURE__*/_jsxDEV(FormattedMessage, {\n          id: \"logIn.notMember\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(UnderlinedButton, {\n        text: \"Sign up\",\n        textId: \"logIn.signUp\",\n        onClick: () => props.history.push(\"/signup\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n};\n\n_s(SignIn, \"8RdFSGbhfNB4YKhvZbty5dXw2po=\", false, function () {\n  return [useAuthContext, useLocation, useSelector, useHistory];\n});\n\n_c = SignIn;\nexport default SignIn;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignIn\");","map":{"version":3,"sources":["/Users/haesol/Desktop/mediround-user-web-master/src/pages/SignIn.tsx"],"names":["React","useState","useEffect","useSelector","useHistory","useLocation","useAuthContext","Button","UnderlinedButton","InfoInput","parseQuery","phoneLocaleList","FormattedMessage","SignIn","props","auth","location","phoneLocale","setPhoneLocale","value","phoneDigit","setPhoneDigit","phone","setPhone","password","setPassword","signInLoading","setSignInLoading","user","state","current","history","nextLoc","search","push","fullPhone","signInHandler","authenticate","then","catch","err","console","error","e","target","map","obj","icon"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { RouteComponentProps, useHistory, useLocation } from \"react-router\";\nimport { useAuthContext } from \"../auth/auth\";\nimport Button from \"../components/Button/Button\";\nimport UnderlinedButton from \"../components/Button/UnderlinedButton\";\nimport InfoInput from \"../components/Input/InfoInput\";\nimport { RootState } from \"../store\";\nimport { parseQuery, phoneLocaleList } from \"../utils\";\nimport \"./SignIn.scss\";\nimport { FormattedMessage } from \"react-intl\";\n\nconst SignIn = (props: RouteComponentProps) => {\n  const auth = useAuthContext();\n  const location = useLocation();\n  const [phoneLocale, setPhoneLocale] = useState(phoneLocaleList[0].value);\n  const [phoneDigit, setPhoneDigit] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [signInLoading, setSignInLoading] = useState(false);\n  const user = useSelector((state: RootState) => state.user.current);\n  const history = useHistory();\n\n  useEffect(() => {\n    const nextLoc = parseQuery(location.search)[\"next\"];\n    if (user !== {} && nextLoc) {\n      history.push(nextLoc);\n    }\n  }, []);\n\n  useEffect(() => {\n    // Determines phone number i.e. username\n    const fullPhone = phoneLocale + phoneDigit;\n    setPhone(fullPhone);\n  }, [phoneLocale, phoneDigit]);\n\n  const signInHandler = () => {\n    setSignInLoading(true);\n    auth\n      ?.authenticate(phone, password)\n      .then(() => {\n        const nextLoc = parseQuery(location.search)[\"next\"];\n        if (nextLoc) {\n          props.history.push(nextLoc);\n        } else {\n          props.history.push(\"/mypage\");\n        }\n      })\n      .catch((err) => {\n        setSignInLoading(false);\n        console.error(err);\n      });\n  };\n\n  return (\n    <div className=\"signin-page-container\">\n      <div className=\"signin-page-title\">\n        <FormattedMessage id=\"logIn.msg\" />\n      </div>\n      <InfoInput\n        title=\"Phone number\"\n        titleId=\"logIn.phone\"\n        type=\"tel\"\n        value={phoneDigit}\n        onChange={(e) => setPhoneDigit(e.target.value)}\n        optionVals={phoneLocaleList.map((obj) => obj.value)}\n        optionKeys={phoneLocaleList.map((obj) => obj.icon + \" \" + obj.value)}\n        onSelectChange={(e) => setPhoneLocale(e.target.value)}\n      />\n      <InfoInput\n        title=\"Password\"\n        titleId=\"logIn.Password\"\n        type=\"password\"\n        value={password}\n        onChange={(e) => setPassword(e.target.value)}\n      />\n      <div className=\"signin-forgot-passwd-text\">\n        <UnderlinedButton\n          text=\"Forgot password?\"\n          textId=\"logIn.forgotYourPassword\"\n          onClick={() => props.history.push(\"/forgotPasswd\")}\n        />\n      </div>\n      <Button\n        text=\"Sign In\"\n        textId=\"button.signIn\"\n        theme=\"primary\"\n        shape=\"round\"\n        onClick={signInHandler}\n        isLoading={signInLoading}\n      />\n      <div className=\"signin-signup-text\">\n        <div className=\"signin-signup-desc\">\n          <FormattedMessage id=\"logIn.notMember\" />\n        </div>\n        <UnderlinedButton\n          text=\"Sign up\"\n          textId=\"logIn.signUp\"\n          onClick={() => props.history.push(\"/signup\")}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default SignIn;\n"]},"metadata":{},"sourceType":"module"}